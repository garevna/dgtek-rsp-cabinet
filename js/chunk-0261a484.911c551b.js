(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0261a484"],{"52b7":function(e,t,s){"use strict";s("b19c")},b19c:function(e,t,s){},d98a:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"transparent mx-auto",attrs:{flat:""}},[e.schema?s("v-card",{staticClass:"transparent mt-0",attrs:{flat:""}},[s("v-container",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{staticClass:"d-none d-md-flex",attrs:{cols:"4","col-lg":"3","col-xl":"2"}},[s("small",[e._v("Building address")])]),s("v-col",{attrs:{cols:"8","col-lg":"6","col-xl":"5"}},[e._v(" "+e._s(e.schema.address.value)+" ")])],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{staticClass:"d-none d-md-flex mb-8",attrs:{cols:"4","col-lg":"3","col-xl":"2"}},[s("small",[e._v("Building unique code")])]),s("v-col",{attrs:{cols:"8","col-lg":"6","col-xl":"5"}},[e._v(" "+e._s(e.schema.buildingUniqueCode.value)+" ")])],1)],1),e._l(["management","owner"],(function(t){return s("v-container",{key:t},e._l(e.schema[t],(function(t,i){return s("v-row",{key:i,staticClass:"my-0",attrs:{justify:"center"}},[s("v-col",{staticClass:"d-none d-md-flex",attrs:{cols:"4","col-lg":"3","col-xl":"2",justify:"end"}},[s("small",[e._v(e._s(t.title))])]),s("v-col",{attrs:{cols:"8","col-lg":"6","col-xl":"5"}},[e.textField(t)?s("v-text-field",{attrs:{label:t.title,rules:[t.required?e.rules.required:function(e){return!0},e.rule(t)],outlined:"",dense:"","hide-details":""},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"prop.value"}}):e._e(),"mobile"===t.type?s("v-text-field",{attrs:{prefix:"+61",rules:[t.required?e.rules.required:function(e){return!0},e.rules.mobile],label:"prop.title",outlined:"",dense:"","hide-details":""},model:{value:t.value,callback:function(s){e.$set(t,"value",s)},expression:"prop.value"}}):e._e(),"address"===t.type?s("GeoscapeAutocomplete",{staticStyle:{"margin-top":"-14px!important","margin-bottom":"8px!important"},attrs:{value:t.value},on:{"update:value":function(s){return e.$set(t,"value",s)}}}):e._e()],1)],1)})),1)}))],2):e._e(),s("v-card-actions",{staticClass:"my-8"},[s("v-spacer"),s("v-btn",{staticClass:"buttons",attrs:{dark:""},on:{click:e.saveBuildingDetails}},[e._v(" Update/save details ")])],1)],1)},a=[],n=(s("d3b7"),s("ade3")),l=s("b85c"),o=s("f61f"),d=s("ce96"),r={name:"EditBuildingDetails",components:{GeoscapeAutocomplete:function(){return s.e("chunk-588c9ff8").then(s.bind(null,"4613"))}},props:{buildingData:Object,buildingId:{type:String,required:!1},postCode:{type:String,required:!1}},data:function(){return{ready:!1,schema:o["a"],buildingDetails:{},rules:o["h"],buildingType:null,sections:["management","owner"]}},computed:{},watch:{buildingData:{deep:!0,immediate:!0,handler:function(e){this.getBuildingDetails(e)}}},methods:{getBuildingDetails:function(e){if(console.log(e),e){var t=e.result?e.result:e,s=t.address,i=t.addressComponents,a=t.status;this.schema.address.value=s,this.schema.addressComponents=Object.assign({},i),this.$emit("update:postCode",i.postCode),this.schema.buildingUniqueCode.value=Object(d["d"])(i),this.schema.status="UnderConstruction"===a?"BuildCommenced":a;var n,o=Object(l["a"])(this.sections);try{for(o.s();!(n=o.n()).done;){var r=n.value;for(var u in this.schema[r])this.schema[r][u].value=t[r][u]||""}}catch(c){o.e(c)}finally{o.f()}}},getNewBuildingId:function(e){console.log("NEW BUILDING CREATED EVENT:\n",e),200===e.status&&this.$emit("update:buildingId",e.key||e.result)},sendMessage:function(e){console.log("SAVE BUILDING EVENT:\n",e),this.$root.$emit("open-message-popup",{messageTyle:"Building details",messageText:"Data updated"})},rowHeight:function(e){return"textarea"===e.type?160:60},textField:function(e){return Object(d["h"])(e.type)},rule:function(e){return this.rules[e.type]},saveBuildingDetails:function(){for(var e={address:this.schema.address.value,addressComponents:this.schema.addressComponents,management:{},owner:{},status:this.schema.status},t=0,s=["management","owner"];t<s.length;t++){var i=s[t];for(var a in this.schema[i])Object.assign(e[i],Object(n["a"])({},a,this.schema[i][a].value))}console.log("Building id: ",this.buildingData.buildingId),console.log(e),this.$root.$emit("progress-event",!0),this.buildingData.buildingId?(console.log("PUT"),this.__putBuildingDetails(this.buildingData.buildingId,e)):(console.log("POST"),this.__postBuildingDetails(e))}},beforeDestroy:function(){this.$root.$off("building-data-received",this.getBuildingDetails),this.$root.$off("buildings-data-saved",this.sendMessage),this.$root.$off("new-building-created",this.getNewBuildingId)},mounted:function(){if(this.$root.$on("building-data-received",this.getBuildingDetails),this.$root.$on("buildings-data-saved",this.sendMessage),this.$root.$on("new-building-created",this.getNewBuildingId),this.buildingId)return this.__getBuildingById(this.buildingId);this.getBuildingDetails(this.buildingData)}},u=r,c=(s("52b7"),s("2877")),g=s("6544"),h=s.n(g),m=s("8336"),v=s("b0af"),p=s("99d9"),f=s("62ad"),b=s("a523"),y=s("0fd9"),C=s("2fa4"),x=s("8654"),B=Object(c["a"])(u,i,a,!1,null,"69a2d1a2",null);t["default"]=B.exports;h()(B,{VBtn:m["a"],VCard:v["a"],VCardActions:p["a"],VCol:f["a"],VContainer:b["a"],VRow:y["a"],VSpacer:C["a"],VTextField:x["a"]})}}]);
//# sourceMappingURL=chunk-0261a484.911c551b.js.map