(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eb3951e"],{1681:function(t,e,i){},"8ab8":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"transparent mx-auto py-5",attrs:{flat:""}},[i("v-toolbar",{staticClass:"transparent",staticStyle:{"box-shadow":"none"}},[i("v-toolbar-title",[i("v-icon",[t._v("mdi-card-text-outline")]),t._v(" Ticket ")],1),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("update:edit",!1)}}},[i("v-icon",{attrs:{large:""}},[t._v("mdi-close")])],1)],1),i("v-divider",{staticClass:"mb-12"}),i("v-row",{attrs:{justify:"center"}},[t.categories?i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-select",{staticStyle:{width:"270px"},attrs:{items:t.categories,label:"Ticket category",outlined:"",dense:"","hide-details":"",color:"#900"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}})],1):t._e(),i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-select",{staticStyle:{width:"270px"},attrs:{items:t.severities,label:"Severity",outlined:"",dense:"","hide-details":"",color:"#900"},model:{value:t.severity,callback:function(e){t.severity=e},expression:"severity"}})],1),i("v-col",{attrs:{cols:"12",md:"4"}},[i("v-select",{staticStyle:{width:"270px"},attrs:{items:t.priorities,label:"Priority",outlined:"",dense:"","hide-details":"",color:"#900"},model:{value:t.priority,callback:function(e){t.priority=e},expression:"priority"}})],1)],1),i("v-row",[i("v-col",{staticClass:"text-right",attrs:{cols:"3"}},[i("p",[t._v("Subject")])]),i("v-col",{attrs:{cols:"9"}},[i("v-text-field",{attrs:{label:"Subject",outlined:"","hide-details":""},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}})],1)],1),"Customer issue"===t.category||"Service issue"===t.category?i("v-row",[i("v-col",{staticClass:"text-right",attrs:{cols:"3"}},[i("p",[t._v("Customer")])]),t.customersList?i("v-col",{attrs:{cols:"9"}},[i("v-select",{attrs:{items:t.customersList,outlined:"",chips:"","hide-details":""},model:{value:t.customer,callback:function(e){t.customer=e},expression:"customer"}})],1):t._e()],1):t._e(),i("v-row",[i("v-textarea",{attrs:{label:"Details",outlined:"","hide-details":""},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}})],1),i("v-row",[i("v-col",{staticClass:"text-right",attrs:{cols:"12",md:"6"}},[i("p",[i("small",[t._v("Contact number of the responsible person")])])]),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{label:"Phone",outlined:"",dense:"","persistent-hint":"",hint:"* For urgent matters only"},model:{value:t.contactPhone,callback:function(e){t.contactPhone=e},expression:"contactPhone"}})],1)],1),i("v-row",{staticClass:"mt-12"},[i("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:function(e){return t.$emit("update:edit",!1)}}},[t._v("Back to tickets list")]),i("v-spacer"),i("v-btn",{staticClass:"primary",attrs:{dark:""},on:{click:t.save}},[t._v("Update/save details")])],1)],1)},a=[],o=(i("99af"),i("c740"),i("d81d"),i("ade3")),c={name:"EditTicket",props:["ticket","categories","newTicket","edit"],data:function(){return{severities:["Low","Medium","Hight"],priorities:["Low","Medium","Hight"],customersList:null,customersIds:null,customer:null}},computed:{category:{get:function(){return this.ticket.category},set:function(t){this.update("category",t)}},severity:{get:function(){return this.ticket.severity},set:function(t){this.update("severity",t)}},priority:{get:function(){return this.ticket.priority},set:function(t){this.update("priority",t)}},subject:{get:function(){return this.ticket.subject},set:function(t){this.update("subject",t)}},details:{get:function(){return this.ticket.details},set:function(t){this.update("details",t)}},customerId:{get:function(){return this.ticket.customerId},set:function(t){this.update("customerId",t)}},contactPhone:{get:function(){return this.ticket.contactPhone},set:function(t){this.update("contactPhone",t)}}},watch:{customer:function(t){if(this.customersList){var e=this.customersList.findIndex((function(e){return e===t}));-1!==e&&(this.customerId=this.customersIds[e])}}},methods:{fillCustomerList:function(t){var e=this;if(t&&t.result){this.customersList=t.result.map((function(t){return"".concat(t.apartmentNumber,"/").concat(t.address)})),this.customersIds=t.result.map((function(t){return t._id}));var i=this.customersIds.findIndex((function(t){return t===e.ticket.customerId}));this.customer=-1!==i?this.customersList[i]:null}},postNewTicket:function(){this.update("created",(new Date).valueOf());var t=JSON.parse(JSON.stringify(this.ticket));delete t.createdDate,delete t.modifiedDate,this.__postNewTicket(t)},updateTicket:function(){this.update("modified",(new Date).valueOf());var t=JSON.parse(JSON.stringify(this.ticket));delete t.createdDate,delete t.modifiedDate,this.__saveTicketData(this.ticket._id,t)},save:function(){this.newTicket?this.postNewTicket():this.updateTicket()},callback:function(t){this.customerName="".concat(t.apartmentNumber,"/").concat(t.address," (").concat(t.firstName," ").concat(t.lastName,")")},update:function(t,e){this.$emit("update:ticket",Object.assign({},this.ticket,Object(o["a"])({},t,e)))}},beforeDestroy:function(){this.$root.$off("customers-list-received",this.fillCustomerList)},mounted:function(){this.$root.$on("customers-list-received",this.fillCustomerList),this.__getCustomers()}},r=c,n=i("2877"),u=i("6544"),l=i.n(u),d=i("8336"),h=i("b0af"),p=i("62ad"),m=i("ce7e"),f=i("132d"),v=i("0fd9"),b=i("b974"),g=i("2fa4"),k=i("8654"),w=i("a844"),y=i("71d9"),x=i("2a7f"),I=Object(n["a"])(r,s,a,!1,null,null,null);e["default"]=I.exports;l()(I,{VBtn:d["a"],VCard:h["a"],VCol:p["a"],VDivider:m["a"],VIcon:f["a"],VRow:v["a"],VSelect:b["a"],VSpacer:g["a"],VTextField:k["a"],VTextarea:w["a"],VToolbar:y["a"],VToolbarTitle:x["a"]})},a844:function(t,e,i){"use strict";i("a9e3");var s=i("5530"),a=(i("1681"),i("8654")),o=i("58df"),c=Object(o["a"])(a["a"]);e["a"]=c.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(s["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},a["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"}},genInput:function(){var t=a["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){a["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);
//# sourceMappingURL=chunk-0eb3951e.71faeb35.js.map