(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f31a"],{d97f:function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-card",{staticClass:"transparent mx-auto",attrs:{flat:"",width:"960"}},[n("v-toolbar",{staticClass:"transparent",staticStyle:{"box-shadow":"none"}},[n("v-spacer"),n("v-btn",{attrs:{icon:"",large:""},on:{click:function(i){return t.$emit("update:dialog",!1)}}},[n("v-icon",[t._v("mdi-close")])],1)],1),t.ready?n("EditCustomerDetails",{attrs:{initialCustomer:t.customer,buildingId:t.buildingId,buildingPostCode:t.buildingPostCode},on:{"update:initialCustomer":function(i){t.customer=i},"update:initial-customer":function(i){t.customer=i},"update:buildingId":function(i){t.buildingId=i},"update:building-id":function(i){t.buildingId=i}}}):t._e(),t.ready?n("EditBuildingDetails",{attrs:{buildingData:t.buildingData,buildingId:t.buildingId,postCode:t.buildingPostCode},on:{"update:buildingId":function(i){t.buildingId=i},"update:building-id":function(i){t.buildingId=i},"update:postCode":function(i){t.buildingPostCode=i},"update:post-code":function(i){t.buildingPostCode=i}}}):t._e(),n("v-row",{staticClass:"my-12",attrs:{justify:"center"}},[n("v-btn",{attrs:{outlined:"",text:"",color:"buttons"},on:{click:function(i){return t.$emit("update:dialog",!1)}}},[t._v("Exit")])],1)],1)},d=[],s=(n("d3b7"),n("f61f")),o=n("ce96"),u={name:"CustomerDetails",components:{EditCustomerDetails:function(){return Promise.all([n.e("chunk-63c79bd4"),n.e("chunk-74bd845e")]).then(n.bind(null,"ff53"))},EditBuildingDetails:function(){return n.e("chunk-5cb01819").then(n.bind(null,"d98a"))}},props:["customerId","initialAddressData","dialog"],data:function(){return{ready:!1,customer:null,buildingData:null,buildingId:null,buildingPostCode:null}},watch:{buildingId:function(t){Object.assign(this.customer,{buildingId:t})},buildingPostCode:function(t){Object.assign(this.customer,{postCode:t})}},methods:{getBuildingEventHandler:function(t){console.log("CUSTOMER DETAILS COMPONENT HAS RECEIVED THE BUILDING DATA: ",t),this.buildingData={buildingId:t._id,buildingAddress:Object(o["b"])(t.address),buildingAddressComponents:t.addressComponents,buildingManagement:JSON.parse(JSON.stringify(t.management)),buildingOwner:JSON.parse(JSON.stringify(t.owner)),buildingStatus:t.status},this.ready=!0,console.log("BUILDING DATA:\n",this.buildingData)},getCustomerEventHandler:function(t){console.log("CUSTOMER DATA RECEIVED:\n",t),this.customer=t.result;var i=t.result.buildingId;if(i)return this.__getBuildingById(i)},assignNewService:function(){},createNewCustomer:function(){console.log("CREATE NEW CUSTOMER");var t=this.initialAddressData,i=t.buildingAddress,n=t.buildingAddressComponents,e=t.buildingId,d=t.buildingManagement,u=t.buildingOwner,a=t.buildingStatus;console.log(i),console.log(n),this.customer=JSON.parse(JSON.stringify(s["f"])),this.customer.address=Object(o["b"])(i),this.customer.buildingId=e||null,this.customer.postCode=n.postCode,this.customer.uniqueCode="".concat(Object(o["a"])(n),".0}"),this.buildingData={buildingId:e,buildingAddress:Object(o["b"])(i),buildingAddressComponents:n,buildingManagement:d,buildingOwner:u,buildingStatus:a}}},beforeDestroy:function(){this.$root.$off("customer-data-received",this.getCustomerEventHandler),this.$root.$off("building-data-received",this.getBuildingEventHandler)},mounted:function(){if(console.log("CUSTOMER DETAILS MOUNTED"),console.log("CUSTOMER ID: ",this.customerId),console.log("INITIAL ADDRESS DATA:\n",this.initialAddressData),this.customerId)this.$root.$on("customer-data-received",this.getCustomerEventHandler),this.$root.$on("building-data-received",this.getBuildingEventHandler),this.__getCustomerData(this.customerId);else{if(!this.initialAddressData)return console.warn('Error: prop "initialAddressData" not defined');this.buildingData=JSON.parse(JSON.stringify(this.initialAddressData)),this.createNewCustomer(),this.ready=!0}}},a=u,l=n("2877"),r=n("6544"),c=n.n(r),g=n("8336"),b=n("b0af"),f=n("132d"),m=n("0fd9"),h=n("2fa4"),C=n("71d9"),p=Object(l["a"])(a,e,d,!1,null,null,null);i["default"]=p.exports;c()(p,{VBtn:g["a"],VCard:b["a"],VIcon:f["a"],VRow:m["a"],VSpacer:h["a"],VToolbar:C["a"]})}}]);
//# sourceMappingURL=chunk-2d21f31a.ffd05d88.js.map