{"version":3,"sources":["webpack:///./src/components/customers/EditBuildingDetails.vue?c378","webpack:///./src/components/customers/EditBuildingDetails.vue?df60","webpack:///src/components/customers/EditBuildingDetails.vue","webpack:///./src/components/customers/EditBuildingDetails.vue?b9ee","webpack:///./src/components/customers/EditBuildingDetails.vue?c9c1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","schema","address","value","buildingUniqueCode","_l","sectionName","key","prop","propName","title","textField","required","rules","rule","model","callback","$$v","$set","expression","_e","type","mobile","on","saveBuildingDetails","staticRenderFns","name","props","buildingData","Object","buildingId","String","postCode","data","computed","watch","deep","immediate","handler","getData","methods","buildingAddress","addressComponents","assign","buildingAddressComponents","$emit","buildingStatus","sections","getNewBuildingId","console","log","$root","status","result","sendMessage","event","messageTyle","messageText","rowHeight","item","management","owner","section","__putBuildingDetails","__postBuildingDetails","beforeDestroy","$off","mounted","warn","$on","component","VBtn","VCard","VCardActions","VCol","VContainer","VRow","VSpacer","VTextField"],"mappings":"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","file":"js/chunk-6e6adf22.58e737e2.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditBuildingDetails.vue?vue&type=style&index=0&id=158e9d82&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"transparent mx-auto\",attrs:{\"flat\":\"\"}},[(_vm.schema)?_c('v-card',{staticClass:\"transparent mt-0\",attrs:{\"flat\":\"\"}},[_c('v-container',[_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{staticClass:\"d-none d-md-flex\",attrs:{\"cols\":\"4\",\"col-lg\":\"3\",\"col-xl\":\"2\"}},[_c('small',[_vm._v(\"Building address\")])]),_c('v-col',{attrs:{\"cols\":\"8\",\"col-lg\":\"6\",\"col-xl\":\"5\"}},[_vm._v(\" \"+_vm._s(_vm.schema.address.value)+\" \")])],1),_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('v-col',{staticClass:\"d-none d-md-flex mb-8\",attrs:{\"cols\":\"4\",\"col-lg\":\"3\",\"col-xl\":\"2\"}},[_c('small',[_vm._v(\"Building unique code\")])]),_c('v-col',{attrs:{\"cols\":\"8\",\"col-lg\":\"6\",\"col-xl\":\"5\"}},[_vm._v(\" \"+_vm._s(_vm.schema.buildingUniqueCode.value)+\" \")])],1)],1),_vm._l((['management', 'owner']),function(sectionName){return _c('v-container',{key:sectionName},_vm._l((_vm.schema[sectionName]),function(prop,propName){return _c('v-row',{key:propName,staticClass:\"my-0\",attrs:{\"justify\":\"center\"}},[_c('v-col',{staticClass:\"d-none d-md-flex\",attrs:{\"cols\":\"4\",\"col-lg\":\"3\",\"col-xl\":\"2\",\"justify\":\"end\"}},[_c('small',[_vm._v(_vm._s(prop.title))])]),_c('v-col',{attrs:{\"cols\":\"8\",\"col-lg\":\"6\",\"col-xl\":\"5\"}},[(_vm.textField(prop))?_c('v-text-field',{attrs:{\"label\":prop.title,\"rules\":[prop.required ? _vm.rules.required : function (value) { return true; }, _vm.rule(prop)],\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(prop.value),callback:function ($$v) {_vm.$set(prop, \"value\", $$v)},expression:\"prop.value\"}}):_vm._e(),(prop.type === 'mobile')?_c('v-text-field',{attrs:{\"prefix\":\"+61\",\"rules\":[prop.required ? _vm.rules.required : function (value) { return true; }, _vm.rules.mobile],\"label\":\"prop.title\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(prop.value),callback:function ($$v) {_vm.$set(prop, \"value\", $$v)},expression:\"prop.value\"}}):_vm._e()],1)],1)}),1)})],2):_vm._e(),_c('v-card-actions',{staticClass:\"my-8\"},[_c('v-spacer'),_c('v-btn',{staticClass:\"buttons\",attrs:{\"dark\":\"\"},on:{\"click\":_vm.saveBuildingDetails}},[_vm._v(\"Save\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card flat class=\"transparent mx-auto\">\n    <!-- <fieldset class=\"my-4 pa-8\">\n      <legend class=\"ml-4\"><h5>Building details</h5></legend> -->\n      <!-- <v-toolbar class=\"transparent\" style=\"box-shadow: none\">\n\n      </v-toolbar> -->\n      <v-card flat class=\"transparent mt-0\" v-if=\"schema\">\n        <v-container>\n          <v-row justify=\"center\">\n            <v-col cols=\"4\" col-lg=\"3\" col-xl=\"2\" class=\"d-none d-md-flex\">\n              <small>Building address</small>\n            </v-col>\n            <v-col cols=\"8\" col-lg=\"6\" col-xl=\"5\">\n              {{ schema.address.value }}\n            </v-col>\n          </v-row>\n          <v-row justify=\"center\">\n            <v-col cols=\"4\" col-lg=\"3\" col-xl=\"2\" class=\"d-none d-md-flex mb-8\">\n              <small>Building unique code</small>\n            </v-col>\n            <v-col cols=\"8\" col-lg=\"6\" col-xl=\"5\">\n              {{ schema.buildingUniqueCode.value }}\n            </v-col>\n          </v-row>\n        </v-container>\n        <v-container v-for=\"sectionName of ['management', 'owner']\" :key=\"sectionName\">\n          <v-row justify=\"center\" v-for=\"(prop, propName) in schema[sectionName]\" :key=\"propName\" class=\"my-0\">\n            <v-col cols=\"4\" col-lg=\"3\" col-xl=\"2\" class=\"d-none d-md-flex\" justify=\"end\">\n              <small>{{ prop.title }}</small>\n            </v-col>\n            <v-col cols=\"8\" col-lg=\"6\" col-xl=\"5\">\n              <v-text-field\n                v-if=\"textField(prop)\"\n                v-model=\"prop.value\"\n                :label=\"prop.title\"\n                :rules=\"[prop.required ? rules.required : (value) => true, rule(prop)]\"\n                outlined\n                dense\n                hide-details\n              />\n              <v-text-field\n                v-if=\"prop.type === 'mobile'\"\n                v-model=\"prop.value\"\n                prefix=\"+61\"\n                :rules=\"[prop.required ? rules.required : (value) => true, rules.mobile]\"\n                label=\"prop.title\"\n                outlined\n                dense\n                hide-details\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-container>\n      </v-card>\n      <v-card-actions class=\"my-8\">\n        <v-spacer />\n        <v-btn dark class=\"buttons\" @click=\"saveBuildingDetails\">Save</v-btn>\n      </v-card-actions>\n    <!-- </fieldset> -->\n  </v-card>\n</template>\n\n<script>\n\nimport { buildingSchema, rules } from '@/configs'\nimport { testTextField, getBuildingUniqueCode } from '@/helpers'\n\nexport default {\n  name: 'EditBuildingDetails',\n  props: {\n    buildingData: Object,\n    buildingId: {\n      type: String,\n      required: false\n    },\n    postCode: {\n      type: String,\n      required: false\n    }\n  },\n  data: () => ({\n    ready: false,\n    schema: buildingSchema,\n    buildingDetails: {},\n    rules: rules,\n    buildingType: null,\n    sections: {\n      management: 'buildingManagement',\n      owner: 'buildingOwner'\n    }\n  }),\n  computed: {},\n  watch: {\n    buildingData: {\n      deep: true,\n      immediate: true,\n      handler (data) {\n        this.getData(data)\n      }\n    }\n  },\n  methods: {\n    getData (data) {\n      this.schema.address.value = data.buildingAddress\n      this.schema.addressComponents = Object.assign({}, data.buildingAddressComponents)\n      this.$emit('update:postCode', data.buildingAddressComponents.postCode)\n      this.schema.buildingUniqueCode.value = getBuildingUniqueCode(data.buildingAddressComponents)\n      this.schema.buildingStatus = data.buildingStatus\n\n      for (const sectionName of Object.keys(this.sections)) {\n        for (const propName in this.schema[sectionName]) {\n          this.schema[sectionName][propName].value = data[this.sections[sectionName]][propName]\n        }\n      }\n    },\n    getNewBuildingId (data) {\n      console.log('NEW BUILDING CREATED EVENT:\\n', data)\n      this.$root.$emit('progress-event', false)\n      if (data.status === 200) {\n        this.$emit('update:buildingId', data.key || data.result)\n      }\n    },\n    sendMessage (event) {\n      this.$root.$emit('progress-event', false)\n      console.log('SAVE BUILDING EVENT:\\n', event)\n      this.$root.$emit('open-message-popup', {\n        messageTyle: 'Building details',\n        messageText: 'Data updated'\n      })\n    },\n    rowHeight (item) {\n      return item.type === 'textarea' ? 160 : 60\n    },\n    textField (item) {\n      return testTextField(item.type)\n    },\n    rule (item) {\n      return this.rules[item.type]\n    },\n    saveBuildingDetails () {\n      const result = {\n        address: this.schema.address.value,\n        addressComponents: this.schema.addressComponents,\n        management: {},\n        owner: {},\n        status: this.schema.buildingStatus\n      }\n      for (const section of ['management', 'owner']) {\n        for (const propName in this.schema[section]) {\n          Object.assign(result[section], { [propName]: this.schema[section][propName].value })\n        }\n      }\n\n      console.log('Building id: ', this.buildingData.buildingId)\n      console.log(result)\n      this.$root.$emit('progress-event', true)\n\n      if (this.buildingData.buildingId) {\n        this.__putBuildingDetails(this.buildingData.buildingId, result)\n      } else {\n        this.__postBuildingDetails(result)\n      }\n    }\n  },\n  beforeDestroy () {\n    this.$root.$off('buildings-data-saved', this.sendMessage)\n    this.$root.$off('new-building-created', this.getNewBuildingId)\n  },\n  mounted () {\n    console.warn('BUILDING MOUNTED:\\n', this.buildingData)\n\n    this.$root.$on('buildings-data-saved', this.sendMessage)\n    this.$root.$on('new-building-created', this.getNewBuildingId)\n  }\n}\n</script>\n\n<style scoped>\ntable {\n  width: 100%;\n  /* margin-bottom: 160px; */\n}\ntr {\n  margin-bottom: 32px;\n}\ntd {\n  /* border: dotted 1px red; */\n  font-size: 14px;\n  padding: 4px 12px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditBuildingDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditBuildingDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditBuildingDetails.vue?vue&type=template&id=158e9d82&scoped=true&\"\nimport script from \"./EditBuildingDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./EditBuildingDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditBuildingDetails.vue?vue&type=style&index=0&id=158e9d82&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"158e9d82\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCol,VContainer,VRow,VSpacer,VTextField})\n"],"sourceRoot":""}