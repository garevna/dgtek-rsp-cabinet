{"version":3,"sources":["webpack:///./src/components/customers/CustomersList.vue?7edf","webpack:///src/components/customers/CustomersList.vue","webpack:///./src/components/customers/CustomersList.vue?4dca","webpack:///./src/components/customers/CustomersList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","edit","attrs","selectedCustomerId","on","$event","staticClass","staticStyle","statuses","model","value","callback","$$v","status","expression","speeds","speed","plans","plan","postalCodes","postCode","ref","headers","filteredItems","search","scopedSlots","_u","key","fn","item","editItem","_v","_s","selectedCustomersNumber","_e","staticRenderFns","name","components","CustomerDetails","data","text","align","sortable","watch","console","log","val","deep","handler","computed","customers","map","length","methods","getData","result","ready","getServices","services","id","forceRerender","__getCustomers","mounted","$on","$root","__getServices","component","VBtn","VCard","VCardTitle","VContainer","VDataTable","VRow","VSelect","VTextField"],"mappings":"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","file":"js/chunk-2d0d6356.acac5fcc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[(!_vm.edit)?_c('v-row',{attrs:{\"justify\":\"center\"}},[(_vm.ready)?_c('v-card',{staticClass:\"transparent pb-12 px-12\",attrs:{\"flat\":\"\"}},[_c('v-card-title',[_c('table',[_c('tbody',[_c('tr',[_c('td',[_c('v-select',{staticStyle:{\"width\":\"270px\"},attrs:{\"items\":_vm.statuses,\"label\":\"Service status\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"color\":\"primary\"},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}})],1),_c('td',[_c('v-select',{staticStyle:{\"width\":\"180px\"},attrs:{\"items\":_vm.speeds,\"label\":\"Service speed\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"color\":\"primary\"},model:{value:(_vm.speed),callback:function ($$v) {_vm.speed=$$v},expression:\"speed\"}})],1),_c('td',[_c('v-select',{staticStyle:{\"width\":\"140px\"},attrs:{\"items\":_vm.plans,\"label\":\"Plan\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"color\":\"primary\"},model:{value:(_vm.plan),callback:function ($$v) {_vm.plan=$$v},expression:\"plan\"}})],1),_c('td',[_c('v-select',{staticStyle:{\"width\":\"140px\"},attrs:{\"items\":_vm.postalCodes,\"label\":\"Post code\",\"outlined\":\"\",\"clearable\":\"\",\"dense\":\"\",\"color\":\"primary\"},model:{value:(_vm.postCode),callback:function ($$v) {_vm.postCode=$$v},expression:\"postCode\"}})],1)])])])]),_c('v-data-table',{ref:\"customersList\",attrs:{\"headers\":_vm.headers,\"items\":_vm.filteredItems,\"search\":_vm.search},scopedSlots:_vm._u([{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{staticClass:\"primary\",attrs:{\"outlined\":\"\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.editItem(item)}}},[_vm._v(\"Edit\")])]}}],null,false,16053965)}),_c('v-text-field',{staticStyle:{\"display\":\"inline-block\",\"width\":\"280px\"},attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search\",\"single-line\":\"\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('span',{staticClass:\"ml-12\"},[_c('small',[_vm._v(\"Total selected customers: \"+_vm._s(_vm.selectedCustomersNumber))])])],1):_vm._e()],1):_c('v-row',{attrs:{\"justify\":\"center\"}},[_c('CustomerDetails',{attrs:{\"dialog\":_vm.edit,\"customerId\":_vm.selectedCustomerId},on:{\"update:dialog\":function($event){_vm.edit=$event}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-row v-if=\"!edit\" justify=\"center\">\n      <v-card flat class=\"transparent pb-12 px-12\" v-if=\"ready\">\n        <v-card-title>\n          <table>\n            <tbody>\n              <tr>\n                <td>\n                  <v-select\n                    :items=\"statuses\"\n                    v-model=\"status\"\n                    label=\"Service status\"\n                    outlined\n                    clearable\n                    dense\n                    color=\"primary\"\n                    style=\"width: 270px\"\n                  ></v-select>\n                </td>\n                <td>\n                  <v-select\n                    :items=\"speeds\"\n                    v-model=\"speed\"\n                    label=\"Service speed\"\n                    outlined\n                    clearable\n                    dense\n                    color=\"primary\"\n                    style=\"width: 180px\"\n                  ></v-select>\n                </td>\n                <td>\n                  <v-select\n                    :items=\"plans\"\n                    v-model=\"plan\"\n                    label=\"Plan\"\n                    outlined\n                    clearable\n                    dense\n                    color=\"primary\"\n                    style=\"width: 140px\"\n                  ></v-select>\n                </td>\n                <td>\n                  <v-select\n                    :items=\"postalCodes\"\n                    v-model=\"postCode\"\n                    label=\"Post code\"\n                    outlined\n                    clearable\n                    dense\n                    color=\"primary\"\n                    style=\"width: 140px\"\n                  ></v-select>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </v-card-title>\n\n        <v-data-table\n          ref=\"customersList\"\n          :headers=\"headers\"\n          :items=\"filteredItems\"\n          :search=\"search\"\n        >\n          <template v-slot:item.actions=\"{ item }\">\n            <v-btn outlined @click=\"editItem(item)\" dark class=\"primary\">Edit</v-btn>\n          </template>\n        </v-data-table>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search\"\n          single-line\n          dense\n          outlined\n          hide-details\n          style=\"display: inline-block; width: 280px\"\n        ></v-text-field>\n\n        <span class=\"ml-12\"><small>Total selected customers: {{ selectedCustomersNumber }}</small></span>\n      </v-card>\n    </v-row>\n    <v-row v-else justify=\"center\">\n      <CustomerDetails\n        :dialog.sync=\"edit\"\n        :customerId=\"selectedCustomerId\"\n      />\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n\nexport default {\n  name: 'CustomersList',\n  components: {\n    CustomerDetails: () => import('@/components/customers/CustomerDetails.vue')\n  },\n  data: () => ({\n    ready: false,\n    edit: false,\n    selectedCustomerId: null,\n    data: null,\n    search: '',\n    status: null,\n    speed: null,\n    services: [],\n    plans: [],\n    service: null,\n    plan: null,\n    postCode: null,\n    statuses: ['Active', 'Not connected', 'Awaiting for connection'],\n    speeds: ['50/50', '150/150', '250/250', '500/500', '1000/1000'],\n    headers: [\n      {\n        text: 'Customer name',\n        align: 'start',\n        sortable: false,\n        value: 'name'\n      },\n      { text: 'Unique code', value: 'uniqueCode' },\n      { text: 'Address', value: 'address' },\n      { text: 'Service speed', value: 'serviceSpeed' },\n      { text: 'Service status', value: 'serviceStatus' },\n      { text: 'Plan', value: 'plan' },\n      { text: 'Approx ETA', value: 'approxETA' },\n      { text: 'Term', value: 'serviceTerm' },\n      { text: 'Actions', value: 'actions', sortable: false }\n    ]\n  }),\n  watch: {\n    edit (val) {\n      console.log('EDIT: ', val)\n    },\n    data: {\n      deep: true,\n      handler (value) {\n        console.log('SOURCE DATA CHANGED\\n', value)\n      }\n    }\n  },\n  computed: {\n    customers () {\n      if (!this.data) return\n      return this.data.map(customer => ({\n        name: `${customer.firstName} ${customer.lastName}`,\n        uniqueCode: customer.uniqueCode,\n        postCode: customer.postCode,\n        address: `${customer.apartmentNumber}/${customer.address}`,\n        plan: customer.service ? customer.service.serviceName : '',\n        status: customer.service ? customer.service.status : '',\n        approxETA: customer.approxETA,\n        term: customer.service ? customer.service.term : '',\n        id: customer._id\n      }))\n    },\n    postalCodes () {\n      return this.customers.map(customer => customer.postCode)\n    },\n    selectedCustomersNumber () {\n      return this.filteredItems.length\n    },\n    filteredItems () {\n      if (!this.status && !this.speed && !this.postCode && !this.plan) return this.customers\n      return this.customers\n        .filter(customer => !this.status || (customer.serviceStatus === this.status))\n        .filter(customer => !this.speed || (customer.serviceSpeed === this.speed))\n        .filter(customer => !this.postCode || (customer.postCode === this.postCode))\n        .filter(customer => !this.plan || (customer.plan === this.plan))\n    }\n  },\n  methods: {\n    getData (data) {\n      console.log('CUSTOMERS LIST REFRESHED\\n', data)\n      this.data = data.result\n      this.ready = true\n    },\n    getServices (data) {\n      this.services = data.result\n    },\n    editItem (item) {\n      this.selectedCustomerId = item.id\n      console.log('SELECTED CUSTOMER ID: ', this.selectedCustomerId)\n      this.edit = true\n    },\n    forceRerender () {\n      console.log('FORCE RERENDER', this.selectedCustomerId)\n      this.__getCustomers()\n    }\n  },\n  mounted () {\n    this.$on('refresh-page', this.forceRerender)\n    this.$root.$on('customers-list-received', this.getData)\n    this.$root.$on('services-list-received', this.getServices)\n    this.__getCustomers()\n    this.__getServices()\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomersList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomersList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomersList.vue?vue&type=template&id=0be2a42b&scoped=true&\"\nimport script from \"./CustomersList.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomersList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0be2a42b\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardTitle,VContainer,VDataTable,VRow,VSelect,VTextField})\n"],"sourceRoot":""}