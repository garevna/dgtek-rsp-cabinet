{"version":3,"sources":["webpack:///./src/components/customers/CustomerServices.vue?fac9","webpack:///src/components/customers/CustomerServices.vue","webpack:///./src/components/customers/CustomerServices.vue?1117","webpack:///./src/components/customers/CustomerServices.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","showServices","attrs","on","$event","staticClass","_v","_s","address","scopedSlots","_u","key","fn","_l","item","id","disconnect","service","name","status","Date","modified","toISOString","slice","proxy","selectService","$emit","staticRenderFns","components","Services","props","data","watch","serviceId","schema","find","$root","errorType","errorMessage","push","serviceName","now","log","console","methods","getServiceDetails","serviceStatus","value","serviceStatusModified","createSchema","assignNewService","services","map","activate","beforeDestroy","$off","close","mounted","$on","component","VBtn","VCard","VContainer","VIcon","VRow","VSimpleTable","VSpacer"],"mappings":"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","file":"js/chunk-2d0dd66c.3d73c670.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[(!_vm.showServices)?_c('v-card',{staticClass:\"transparent mx-auto\",attrs:{\"flat\":\"\"}},[_c('v-row',{staticClass:\"mb-4\",attrs:{\"justify\":\"center\"}},[_c('h5',[_c('small',[_vm._v(_vm._s(_vm.address))])])]),_c('v-simple-table',{staticClass:\"my-7\",scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th'),_c('th',{staticClass:\"text-left\"},[_vm._v(\" Service name \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" Service status \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" Status modified \")])])]),_c('tbody',_vm._l((_vm.services),function(item){return _c('tr',{key:item.id},[_c('td',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.disconnect(_vm.service)}}},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-delete\")])],1)],1),_c('td',[_vm._v(_vm._s(item.name))]),_c('td',[_vm._v(_vm._s(item.status))]),_c('td',[_vm._v(_vm._s(new Date(item.modified).toISOString().slice(0, 10)))])])}),0)]},proxy:true}],null,false,3860621595)}),_c('v-row',{staticClass:\"mt-12 mb-4\"},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"outlined\":\"\",\"color\":\"buttons\"},on:{\"click\":_vm.selectService}},[_vm._v(\" Assign new service \")]),_c('v-spacer'),_c('v-btn',{staticClass:\"buttons\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$emit('update:update', true)}}},[_vm._v(\" Update/save details \")])],1)],1):_c('Services',{attrs:{\"opened\":_vm.showServices},on:{\"update:opened\":function($event){_vm.showServices=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <v-card flat class=\"transparent mx-auto\" v-if=\"!showServices\">\n\n      <v-row justify=\"center\" class=\"mb-4\">\n        <h5><small>{{ address }}</small></h5>\n      </v-row>\n\n      <v-simple-table class=\"my-7\">\n        <template v-slot:default>\n          <thead>\n            <tr>\n              <th></th>\n              <th class=\"text-left\">\n                Service name\n              </th>\n              <th class=\"text-left\">\n                Service status\n              </th>\n              <th class=\"text-left\">\n                Status modified\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              v-for=\"item of services\"\n              :key=\"item.id\"\n            >\n              <td>\n                <v-btn icon @click=\"disconnect(service)\">\n                  <v-icon color=\"primary\">mdi-delete</v-icon>\n                </v-btn>\n              </td>\n              <td>{{ item.name }}</td>\n              <td>{{ item.status }}</td>\n              <td>{{ new Date(item.modified).toISOString().slice(0, 10) }}</td>\n            </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n\n      <v-row class=\"mt-12 mb-4\">\n        <v-btn outlined color=\"buttons\" class=\"mr-2\" @click=\"selectService\">\n          Assign new service\n        </v-btn>\n        <v-spacer />\n        <v-btn dark class=\"buttons\" @click=\"$emit('update:update', true)\">\n          Update/save details\n        </v-btn>\n      </v-row>\n    </v-card>\n\n    <Services v-else :opened.sync=\"showServices\" />\n  </v-container>\n</template>\n\n<script>\n\nimport { serviceHandler, showServiceSelectHandler } from '@/helpers'\nimport { Services } from '@/components/dashboard'\n\nexport default {\n  name: 'CustomerServices',\n  components: {\n    Services\n  },\n  props: ['services', 'address', 'update'],\n  data: () => ({\n    schema: [],\n    showServices: false\n  }),\n  watch: {\n    showServices (newValue, oldValue) {\n      if (serviceHandler()) {\n        const { serviceName, serviceId } = serviceHandler()\n        if (!serviceId) return\n        if (this.schema.find(item => item.id === serviceId)) {\n          this.$root.$emit('open-error-popup', {\n            errorType: 'Add customer service',\n            errorMessage: 'Attempt to duplicate service'\n          })\n          return\n        }\n        this.schema.push({\n          id: serviceId,\n          name: serviceName,\n          status: 'Not connected',\n          modified: Date.now(),\n          log: {\n            [Date.now()]: 'Not connected'\n          }\n        })\n      }\n      console.log(this.schema)\n      this.$emit('update:services', this.schema)\n    }\n  },\n  methods: {\n    getServiceDetails (data) {\n      const { serviceName, _id } = data\n      const service = this.services.find(item => item.id === _id)\n      if (!service) return\n      this.schema.push({\n        serviceName,\n        serviceStatus: service.status.value,\n        serviceStatusModified: service.status.modified\n      })\n    },\n    createSchema () {\n      for (const service of this.services) {\n        console.log('SERVICE ID: ', service.id)\n        this.__getServiceById(service.id)\n      }\n    },\n    assignNewService () {\n      const { serviceId, serviceName } = serviceHandler()\n      console.log(serviceId, serviceName)\n      let services = this.schema\n      services = services.map((item) => {\n        delete item.name\n        return item\n      })\n      this.$emit('update:services', services)\n    },\n    selectService () {\n      showServiceSelectHandler('set')\n      this.showServices = true\n      // this.$root.$emit('go-to-services')\n    },\n\n    disconnect (service) {\n      console.log('disconnect', service)\n    },\n    activate (service) {\n      console.log('activate', service)\n    }\n  },\n\n  beforeDestroy () {\n    this.$root.$off('service-details-received', this.getServiceDetails)\n    this.$root.$off('customer-updated', this.close)\n    this.$root.$off('customer-created', this.close)\n  },\n\n  mounted () {\n    this.$root.$on('service-details-received', this.getServiceDetails)\n    this.$root.$on('service-selected', this.assignNewService)\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerServices.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CustomerServices.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CustomerServices.vue?vue&type=template&id=6f26ac1f&\"\nimport script from \"./CustomerServices.vue?vue&type=script&lang=js&\"\nexport * from \"./CustomerServices.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VContainer,VIcon,VRow,VSimpleTable,VSpacer})\n"],"sourceRoot":""}