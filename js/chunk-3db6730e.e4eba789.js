(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db6730e"],{"80db":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[e.showServices?s("Services",{attrs:{opened:e.showServices},on:{"update:opened":function(t){e.showServices=t}}}):s("v-card",{staticClass:"transparent mx-auto",attrs:{flat:""}},[s("v-row",{staticClass:"mb-4",attrs:{justify:"center"}},[s("h5",[s("small",[e._v(e._s(e.address))])])]),s("v-simple-table",{staticClass:"my-7",scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th"),s("th",{staticClass:"text-left"},[e._v(" Service name ")]),s("th",{staticClass:"text-center"},[e._v(" Service status ")]),s("th",{staticClass:"text-center"},[e._v(" Status modified ")]),s("th",{staticClass:"text-center"},[e._v(" History ")])])]),s("tbody",e._l(e.schema,(function(t){return s("tr",{key:t.serviceId},[s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.disconnect(t)}}},[s("v-icon",{attrs:{color:"primary"}},[e._v("mdi-delete")])],1)],1),s("td",[e._v(e._s(t.serviceName))]),s("td",[s("v-btn",{attrs:{text:"",color:"primary",disabled:"Not connected"!==t.status},on:{click:function(s){return e.changeStatusRequest(t)}}},[e._v(" "+e._s(t.serviceStatus)+" ")])],1),s("td",[e._v(e._s(t.serviceStatusModified))]),s("td")])})),0)]},proxy:!0}],null,!1,4258408158)}),s("v-row",{staticClass:"mt-12 mb-4"},[s("v-btn",{staticClass:"mr-2",attrs:{outlined:"",color:"buttons"},on:{click:e.selectService}},[e._v(" Assign new service ")]),s("v-spacer"),s("v-btn",{staticClass:"buttons",attrs:{dark:""},on:{click:e.updateCustomerServices}},[e._v(" Update/save details ")])],1)],1),e.dialog?s("ServiceDeliveryUpdate",{attrs:{dialog:e.dialog,serviceData:e.selected,address:e.address,customerId:e.customerId},on:{"update:dialog":function(t){e.dialog=t},"update:serviceData":function(t){e.selected=t},"update:service-data":function(t){e.selected=t}}}):e._e()],1)},c=[],r=(s("7db0"),s("d81d"),s("fb6a"),s("b0c0"),s("b85c")),o=s("ade3"),a=s("ce96"),n=s("eb8b"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[s("v-toolbar",{attrs:{dense:""}},[s("v-toolbar-title",[s("v-icon",{staticClass:"mt-2 mr-4",attrs:{large:"",color:"primary"}},[e._v(" mdi-cog-refresh ")])],1),s("v-spacer"),e.disableClose?e._e():s("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("update:dialog",!1)}}},[s("v-icon",{attrs:{large:""}},[e._v(" $close ")])],1)],1),s("v-card",{staticClass:"homefone pa-8",attrs:{flat:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",{staticStyle:{color:"#777"}},[s("b",[e._v(e._s(e.address))])])])],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[e._v("Service: ")]),s("b",[e._v(e._s(e.serviceData.name))])])])],1),e.submited?e._e():s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[e._v("Current status: ")]),s("b",[e._v(e._s(e.serviceData.status))])])])],1),e.submited?e._e():s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[e._v(" Would you like to request an update on the service delivery status? ")])])]),s("v-card-text",{staticClass:"text-center"},[s("v-btn",{staticClass:"mr-2",attrs:{outlined:"",color:"primary"},on:{click:e.sendRequest}},[e._v("Yes")]),s("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:e.reset}},[e._v("No")])],1)],1),e.submited?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[e._v(" You service delivery update request has been sent. ")])])])],1):e._e()],1)],1)},l=[],u={name:"ServiceDeliveryUpdate",props:["dialog","address","serviceData","customerId"],data:function(){return{status:status,disableClose:!1,submited:!1}},computed:{opened:{get:function(){return this.dialog},set:function(e){this.$emit("update:dialog",e)}}},methods:{sendRequest:function(){this.disableClose=!0,this.submited=!1,this.__sendServiceActivationRequest({customerId:this.customerId,serviceId:this.serviceData.id})},getResponse:function(e){this.disableClose=!1,this.submited=!0,console.log(e),this.$emit("update:serviceData",e),this.opened=!1},reset:function(){this.opened=!1}},beforeDestroy:function(){this.$root.$off("service-activation-request-sent",this.getResponse)},mounted:function(){console.log("SERVICE DETAILS\n",this.serviceData),this.$root.$on("service-activation-request-sent",this.getResponse)}},v=u,m=s("2877"),h=s("6544"),f=s.n(h),p=s("8336"),S=s("b0af"),b=s("99d9"),g=s("169a"),_=s("132d"),C=s("0fd9"),w=s("2fa4"),y=s("71d9"),x=s("2a7f"),D=Object(m["a"])(v,d,l,!1,null,null,null),I=D.exports;f()(D,{VBtn:p["a"],VCard:S["a"],VCardText:b["b"],VDialog:g["a"],VIcon:_["a"],VRow:C["a"],VSpacer:w["a"],VToolbar:y["a"],VToolbarTitle:x["a"]});var E=function(){this.$root.$emit("open-error-popup",{errorType:"Assign service to customer",errorMessage:"Attempt to duplicate service"})},V={name:"CustomerServices",components:{Services:n["d"],ServiceDeliveryUpdate:I},props:["services","address","update","customerId"],data:function(){return{customerServices:[],customerServiceDescriptions:[],schema:[],details:{},showServices:!1,dialog:!1,selected:null,submit:!1}},watch:{selected:{deep:!0,handler:function(e){console.log("SELECTED SERVICE:\n",e)}},showServices:function(e,t){if(console.log("SHOW SERVICES: ",t,"--\x3e",e),t&&!e){if(console.log(Object(a["f"])()),!Object(a["f"])())return;this.assignNewService()}}},methods:{showError:E,getServiceDetails:function(e){console.log("SERVICE DATA:\n",e);var t=e.serviceName,s=e._id,i=this.services.find((function(e){return e.id===s}));console.log(i),i&&this.schema.push({serviceId:s,serviceName:t,serviceStatus:i.status,serviceStatusModified:new Date(i.modified).toISOString().slice(0,10)})},assignNewService:function(){console.log(Object(a["f"])());var e=Object(a["f"])(),t=e.serviceId,s=e.serviceName,i=e.serviceSpeed,c=e.servicePlan,r=e.serviceTerm;if(this.services.find((function(e){return e.id===t})))return this.showError();this.customerServices.push({id:t,modified:Date.now(),status:"Not connected",log:Object(o["a"])({},Date.now(),"Not connected")}),console.log(this.customerServices),this.schema.push({serviceId:t,serviceStatusModified:(new Date).toISOString().slice(0,10),serviceName:s,serviceSpeed:i,serviceStatus:"Not connected",servicePlan:c,serviceTerm:r}),console.log(this.schema)},selectService:function(){Object(a["g"])("set"),this.showServices=!0},disconnect:function(e){console.log("disconnect",e)},changeStatusRequest:function(e){"Not connected"===e.status&&(this.selected=e,console.log("SELECTED SERVICE:\n",this.selected),this.dialog=!0)},updateCustomerServices:function(){console.log(this.customerServices),this.__updateCustomerServices(this.customerId,this.customerServices)}},beforeDestroy:function(){this.$root.$off("service-details-received",this.getServiceDetails),this.$root.$off("customer-created",this.close)},mounted:function(){console.log(this.services),this.customerServices=this.services.map((function(e){return{id:e.id,status:e.status,modified:e.modified,log:e.log}})),this.$emit("update:services",this.customerServices),console.log(this.services),this.$root.$on("service-details-received",this.getServiceDetails),this.$root.$on("service-selected",this.assignNewService);var e,t=Object(r["a"])(this.services);try{for(t.s();!(e=t.n()).done;){var s=e.value;console.log(s.id),s.name&&delete s.name,this.__getServiceById(s.id)}}catch(i){t.e(i)}finally{t.f()}}},$=V,j=(s("c1bd"),s("a523")),k=s("1f4f"),R=Object(m["a"])($,i,c,!1,null,null,null);t["default"]=R.exports;f()(R,{VBtn:p["a"],VCard:S["a"],VContainer:j["a"],VIcon:_["a"],VRow:C["a"],VSimpleTable:k["a"],VSpacer:w["a"]})},"902e":function(e,t,s){},c1bd:function(e,t,s){"use strict";s("902e")}}]);
//# sourceMappingURL=chunk-3db6730e.e4eba789.js.map