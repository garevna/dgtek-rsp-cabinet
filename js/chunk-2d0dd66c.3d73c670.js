(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd66c"],{"80db":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[e.showServices?s("Services",{attrs:{opened:e.showServices},on:{"update:opened":function(t){e.showServices=t}}}):s("v-card",{staticClass:"transparent mx-auto",attrs:{flat:""}},[s("v-row",{staticClass:"mb-4",attrs:{justify:"center"}},[s("h5",[s("small",[e._v(e._s(e.address))])])]),s("v-simple-table",{staticClass:"my-7",scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th"),s("th",{staticClass:"text-left"},[e._v(" Service name ")]),s("th",{staticClass:"text-left"},[e._v(" Service status ")]),s("th",{staticClass:"text-left"},[e._v(" Status modified ")])])]),s("tbody",e._l(e.services,(function(t){return s("tr",{key:t.id},[s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(t){return e.disconnect(e.service)}}},[s("v-icon",{attrs:{color:"primary"}},[e._v("mdi-delete")])],1)],1),s("td",[e._v(e._s(t.name))]),s("td",[e._v(e._s(t.status))]),s("td",[e._v(e._s(new Date(t.modified).toISOString().slice(0,10)))])])})),0)]},proxy:!0}],null,!1,3860621595)}),s("v-row",{staticClass:"mt-12 mb-4"},[s("v-btn",{staticClass:"mr-2",attrs:{outlined:"",color:"buttons"},on:{click:e.selectService}},[e._v(" Assign new service ")]),s("v-spacer"),s("v-btn",{staticClass:"buttons",attrs:{dark:""},on:{click:function(t){return e.$emit("update:update",!0)}}},[e._v(" Update/save details ")])],1)],1)],1)},c=[],r=(s("7db0"),s("d81d"),s("b0c0"),s("b85c")),a=s("ade3"),o=s("ce96"),n=s("eb8b"),d={name:"CustomerServices",components:{Services:n["d"]},props:["services","address","update"],data:function(){return{schema:[],showServices:!1}},watch:{showServices:function(e,t){if(Object(o["f"])()){var s=Object(o["f"])(),i=s.serviceName,c=s.serviceId;if(!c)return;if(this.schema.find((function(e){return e.id===c})))return void this.$root.$emit("open-error-popup",{errorType:"Add customer service",errorMessage:"Attempt to duplicate service"});this.schema.push({id:c,name:i,status:"Not connected",modified:Date.now(),log:Object(a["a"])({},Date.now(),"Not connected")})}console.log(this.schema),this.$emit("update:services",this.schema)}},methods:{getServiceDetails:function(e){var t=e.serviceName,s=e._id,i=this.services.find((function(e){return e.id===s}));i&&this.schema.push({serviceName:t,serviceStatus:i.status.value,serviceStatusModified:i.status.modified})},createSchema:function(){var e,t=Object(r["a"])(this.services);try{for(t.s();!(e=t.n()).done;){var s=e.value;console.log("SERVICE ID: ",s.id),this.__getServiceById(s.id)}}catch(i){t.e(i)}finally{t.f()}},assignNewService:function(){var e=Object(o["f"])(),t=e.serviceId,s=e.serviceName;console.log(t,s);var i=this.schema;i=i.map((function(e){return delete e.name,e})),this.$emit("update:services",i)},selectService:function(){Object(o["g"])("set"),this.showServices=!0},disconnect:function(e){console.log("disconnect",e)},activate:function(e){console.log("activate",e)}},beforeDestroy:function(){this.$root.$off("service-details-received",this.getServiceDetails),this.$root.$off("customer-updated",this.close),this.$root.$off("customer-created",this.close)},mounted:function(){this.$root.$on("service-details-received",this.getServiceDetails),this.$root.$on("service-selected",this.assignNewService)}},v=d,u=s("2877"),l=s("6544"),f=s.n(l),h=s("8336"),m=s("b0af"),p=s("a523"),S=s("132d"),b=s("0fd9"),w=s("1f4f"),_=s("2fa4"),g=Object(u["a"])(v,i,c,!1,null,null,null);t["default"]=g.exports;f()(g,{VBtn:h["a"],VCard:m["a"],VContainer:p["a"],VIcon:S["a"],VRow:b["a"],VSimpleTable:w["a"],VSpacer:_["a"]})}}]);
//# sourceMappingURL=chunk-2d0dd66c.3d73c670.js.map