(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f31a"],{d97f:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-card",{staticClass:"transparent mx-auto",attrs:{flat:"",width:"960"}},[e("v-toolbar",{staticClass:"transparent",staticStyle:{"box-shadow":"none"}},[e("v-spacer"),e("v-btn",{attrs:{icon:"",large:""},on:{click:function(i){return t.$emit("update:dialog",!1)}}},[e("v-icon",[t._v("mdi-close")])],1)],1),t.ready?e("EditCustomerDetails",{attrs:{initialCustomer:t.customer},on:{"update:initialCustomer":function(i){t.customer=i},"update:initial-customer":function(i){t.customer=i}}}):t._e(),t.ready?e("EditBuildingDetails",{attrs:{buildingData:t.buildingData},on:{"update:buildingData":function(i){t.buildingData=i},"update:building-data":function(i){t.buildingData=i}}}):t._e(),e("v-row",{staticClass:"my-12",attrs:{justify:"center"}},[e("v-btn",{attrs:{outlined:"",text:"",color:"buttons"},on:{click:function(i){return t.$emit("update:dialog",!1)}}},[t._v("Exit")])],1)],1)},s=[],a=(e("d3b7"),e("f61f")),o=e("ce96"),d={name:"CustomerDetails",components:{EditCustomerDetails:function(){return Promise.all([e.e("chunk-63c79bd4"),e.e("chunk-40a062b5")]).then(e.bind(null,"ff53"))},EditBuildingDetails:function(){return e.e("chunk-71f52190").then(e.bind(null,"d98a"))}},props:["customerId","initialAddressData","dialog"],data:function(){return{ready:!1,customer:null,buildingData:null}},methods:{getBuildingEventHandler:function(t){console.log("CUSTOMER DETAILS COMPONENT HAS RECEIVED THE BUILDING DATA: ",t),this.buildingData={buildingId:t._id,buildingAddress:Object(o["b"])(t.address),buildingAddressComponents:t.addressComponents,buildingManagement:JSON.parse(JSON.stringify(t.management)),buildingOwner:JSON.parse(JSON.stringify(t.owner)),buildingStatus:t.status},this.ready=!0,console.log("BUILDING DATA:\n",this.buildingData)},getCustomerEventHandler:function(t){console.log("CUSTOMER DATA RECEIVED:\n",t),this.customer=t.result;var i=t.result.buildingId;if(i)return this.__getBuildingById(i)},assignNewService:function(){},createNewCustomer:function(){console.log("CREATE NEW CUSTOMER");var t=this.initialAddressData,i=t.buildingAddress,e=t.buildingAddressComponents,n=t.buildingId,s=t.buildingManagement,d=t.buildingOwner,r=t.buildingStatus;console.log(i),console.log(e),this.customer=JSON.parse(JSON.stringify(a["f"])),this.customer.address=Object(o["b"])(i),this.customer.buildingId=n||null,this.customer.postCode=e.postCode,this.customer.uniqueCode="".concat(Object(o["a"])(e),".0}"),this.buildingData={buildingId:n,buildingAddress:Object(o["b"])(i),buildingAddressComponents:e,buildingManagement:s,buildingOwner:d,buildingStatus:r}}},beforeDestroy:function(){this.$root.$off("customer-data-received",this.getCustomerEventHandler),this.$root.$off("building-data-received",this.getBuildingEventHandler)},mounted:function(){if(console.log("CUSTOMER DETAILS MOUNTED"),console.log("CUSTOMER ID: ",this.customerId),console.log("INITIAL ADDRESS DATA:\n",this.initialAddressData),this.customerId)this.$root.$on("customer-data-received",this.getCustomerEventHandler),this.$root.$on("building-data-received",this.getBuildingEventHandler),this.__getCustomerData(this.customerId);else{if(!this.initialAddressData)return console.warn('Error: prop "initialAddressData" not defined');this.buildingData=JSON.parse(JSON.stringify(this.initialAddressData)),this.createNewCustomer(),this.ready=!0}}},r=d,u=e("2877"),l=e("6544"),c=e.n(l),g=e("8336"),b=e("b0af"),m=e("132d"),f=e("0fd9"),h=e("2fa4"),D=e("71d9"),E=Object(u["a"])(r,n,s,!1,null,null,null);i["default"]=E.exports;c()(E,{VBtn:g["a"],VCard:b["a"],VIcon:m["a"],VRow:f["a"],VSpacer:h["a"],VToolbar:D["a"]})}}]);
//# sourceMappingURL=chunk-2d21f31a.20a07cce.js.map