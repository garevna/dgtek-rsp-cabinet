(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dd66c"],{"80db":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[t.showServices?s("Services",{attrs:{opened:t.showServices},on:{"update:opened":function(e){t.showServices=e}}}):s("v-card",{staticClass:"transparent mx-auto",attrs:{flat:""}},[s("v-row",{staticClass:"mb-4",attrs:{justify:"center"}},[s("h5",[s("small",[t._v(t._s(t.address))])])]),s("v-simple-table",{staticClass:"my-7",scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th"),s("th",{staticClass:"text-left"},[t._v(" Service name ")]),s("th",{staticClass:"text-center"},[t._v(" Service status ")]),s("th",{staticClass:"text-center"},[t._v(" Status modified ")]),s("th",{staticClass:"text-center"},[t._v(" History ")])])]),s("tbody",t._l(t.services,(function(e){return s("tr",{key:e.id},[s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.disconnect(t.service)}}},[s("v-icon",{attrs:{color:"primary"}},[t._v("mdi-delete")])],1)],1),s("td",[t._v(t._s(e.name))]),s("td",[s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(s){return t.changeStatusRequest(e)}}},[t._v(" "+t._s(e.status)+" ")])],1),s("td",[t._v(t._s(new Date(e.modified).toISOString().slice(0,10)))]),s("td")])})),0)]},proxy:!0}],null,!1,2443401632)}),s("v-row",{staticClass:"mt-12 mb-4"},[s("v-btn",{staticClass:"mr-2",attrs:{outlined:"",color:"buttons"},on:{click:t.selectService}},[t._v(" Assign new service ")]),s("v-spacer"),s("v-btn",{staticClass:"buttons",attrs:{dark:""},on:{click:function(e){return t.$emit("update:update",!0)}}},[t._v(" Update/save details ")])],1)],1),t.dialog?s("ServiceDeliveryUpdate",{attrs:{dialog:t.dialog,serviceData:t.selected,address:t.address,requiredStatus:t.selected.requiredStatus},on:{"update:dialog":function(e){t.dialog=e},"update:requiredStatus":function(e){return t.$set(t.selected,"requiredStatus",e)},"update:required-status":function(e){return t.$set(t.selected,"requiredStatus",e)}}}):t._e()],1)},i=[],r=(s("7db0"),s("d81d"),s("b0c0"),s("b85c")),c=s("ade3"),n=s("ce96"),o=s("eb8b"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[s("v-toolbar",{attrs:{dense:""}},[s("v-toolbar-title",[s("v-icon",{staticClass:"mt-2 mr-4",attrs:{large:"",color:"primary"}},[t._v(" mdi-cog-refresh ")])],1),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("update:dialog",!1)}}},[s("v-icon",{attrs:{large:""}},[t._v(" $close ")])],1)],1),s("v-card",{staticClass:"homefone pa-8",attrs:{flat:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",{staticStyle:{color:"#777"}},[s("b",[t._v(t._s(t.address))])])])],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[t._v("Service: ")]),s("b",[t._v(t._s(t.serviceData.name))])])])],1),t.submitted?t._e():s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[t._v("Current status: ")]),s("b",[t._v(t._s(t.serviceData.status))])])])],1),t.submitted?t._e():s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"4"}},[s("p",{staticClass:"text-right"},[s("small",[t._v("Change to:")])])]),s("v-col",{attrs:{cols:"7"}},[s("v-select",{staticStyle:{width:"270px"},attrs:{items:t.statuses,label:"Service status",outlined:"",dense:"",color:"primary"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1),t.submitted?t._e():s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[t._v(" Would you like to request an update on the service delivery status? ")])])]),s("v-card-text",{staticClass:"text-center"},[s("v-btn",{staticClass:"mr-2",attrs:{outlined:"",color:"primary"},on:{click:t.submit}},[t._v("Yes")]),s("v-btn",{attrs:{outlined:"",color:"primary"},on:{click:t.reset}},[t._v("No")])],1)],1),t.submitted?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card-text",{staticClass:"text-center"},[s("p",[s("small",[t._v(" You service delivery update request has been sent. ")])])])],1):t._e()],1)],1)},d=[],u={name:"ServiceDeliveryUpdate",props:["dialog","address","serviceData"],data:function(){return{message:"Would you like to request an update on the service delivery status?",submitted:!1,statuses:["Active","Not connected","Awaiting for connection"],status:status}},computed:{opened:{get:function(){return this.dialog},set:function(t){this.$emit("update:dialog",t)}}},methods:{reset:function(){this.opened=!1},submit:function(){this.submitted=!0}},mounted:function(){}},v=u,f=s("2877"),m=s("6544"),p=s.n(m),h=s("8336"),b=s("b0af"),g=s("99d9"),S=s("62ad"),_=s("169a"),y=s("132d"),w=s("0fd9"),C=s("b974"),x=s("2fa4"),$=s("71d9"),V=s("2a7f"),k=Object(f["a"])(v,l,d,!1,null,null,null),D=k.exports;p()(k,{VBtn:h["a"],VCard:b["a"],VCardText:g["b"],VCol:S["a"],VDialog:_["a"],VIcon:y["a"],VRow:w["a"],VSelect:C["a"],VSpacer:x["a"],VToolbar:$["a"],VToolbarTitle:V["a"]});var j={name:"CustomerServices",components:{Services:o["d"],ServiceDeliveryUpdate:D},props:["services","address","update"],data:function(){return{schema:[],showServices:!1,dialog:!1,selected:null}},watch:{showServices:function(t,e){if(Object(n["f"])()){var s=Object(n["f"])(),a=s.serviceName,i=s.serviceId;if(!i)return;if(this.schema.find((function(t){return t.id===i})))return void this.$root.$emit("open-error-popup",{errorType:"Add customer service",errorMessage:"Attempt to duplicate service"});this.schema.push({id:i,name:a,status:"Not connected",modified:Date.now(),log:Object(c["a"])({},Date.now(),"Not connected")})}this.$emit("update:services",this.schema)}},methods:{getServiceDetails:function(t){var e=t.serviceName,s=t._id,a=this.services.find((function(t){return t.id===s}));a&&this.schema.push({serviceName:e,serviceStatus:a.status.value,serviceStatusModified:a.status.modified})},createSchema:function(){var t,e=Object(r["a"])(this.services);try{for(e.s();!(t=e.n()).done;){var s=t.value;console.log("SERVICE ID: ",s.id),this.__getServiceById(s.id)}}catch(a){e.e(a)}finally{e.f()}},assignNewService:function(){var t=Object(n["f"])(),e=t.serviceId,s=t.serviceName;console.log(e,s);var a=this.schema;a=a.map((function(t){return delete t.name,t})),this.$emit("update:services",a)},selectService:function(){Object(n["g"])("set"),this.showServices=!0},disconnect:function(t){console.log("disconnect",t)},activate:function(t){console.log("activate",t)},changeStatusRequest:function(t){console.log(t),this.selected=t,this.dialog=!0}},beforeDestroy:function(){this.$root.$off("service-details-received",this.getServiceDetails),this.$root.$off("customer-updated",this.close),this.$root.$off("customer-created",this.close)},mounted:function(){this.$root.$on("service-details-received",this.getServiceDetails),this.$root.$on("service-selected",this.assignNewService)}},q=j,N=s("a523"),O=s("1f4f"),I=Object(f["a"])(q,a,i,!1,null,null,null);e["default"]=I.exports;p()(I,{VBtn:h["a"],VCard:b["a"],VContainer:N["a"],VIcon:y["a"],VRow:w["a"],VSimpleTable:O["a"],VSpacer:x["a"]})}}]);
//# sourceMappingURL=chunk-2d0dd66c.a3172bb8.js.map